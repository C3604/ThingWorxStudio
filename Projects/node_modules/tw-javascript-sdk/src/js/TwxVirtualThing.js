var TW = TW || {};
TW.SDK = TW.SDK || {};
TW.SDK.VirtualThing = function(config) {
    var name = '';
    var eventHandlers = {};

    if (config) {
        name = config.name;
    }

    var api = {
        getName: function() {
            return name;
        },
        addPropertyDefinition: function(propertyDef) {

        },
        addServiceDefinition: function(serviceDef) {

        },
        addEventDefinition: function(eventDef) {

        },
        invokeService: function(serviceName, parameters) {
            if (this[serviceName]) {
                return this[serviceName](parameters.rows[0]);
            }
        },
        readProperty: function(propertyName) {
            // reads a property of the VirtualThing and returns the value
        },
        writeProperty: function(propertyName, value) {
            // sets the value of a property on the Virtual Thing
        },
        fireEvent: function(eventConfig) {
            // executes an event handler for an event
        },
        HandleSubscribedEvent: function(event) {
            if (eventHandlers[event.eventName]) {
                eventHandlers[event.eventName](event);
            }
        },
        on: function(event, callback) {
            eventHandlers[event] = callback;
        },
        getEventListeners: function(eventName) {
            return eventHandlers[eventName];
        }
    };

    return api;
};
