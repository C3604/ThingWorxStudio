var TW = TW || {};
TW.SDK = TW.SDK || {};
TW.SDK.Types = TW.SDK.Types || {};

(function () {
    TW.SDK.Types.ThingCodePrimitive = {
        decode: function(data) {
            TW.SDK.HelperFunctions.validateParameter(data, 'data', ArrayBuffer);

            var domain = TW.SDK.Types.IntegerPrimitive.decode(data.slice(0, 4));
            var instance = TW.SDK.Types.LongPrimitive.decode(data.slice(4));

            return {
                length: 12,
                content: {
                    domainId: domain.content,
                    instanceId: instance.content
                }
            };
        },

        encode: function(content) {
            TW.SDK.HelperFunctions.validateParameter(content, 'content', 'object');

            var buffers = [];

            buffers.push(TW.SDK.Types.IntegerPrimitive.encode(content.domainId));
            buffers.push(TW.SDK.Types.LongPrimitive.encode(content.instanceId));

            _.flatten(buffers);

            return TW.SDK.HelperFunctions.combineArrayBuffers(buffers);
        },

        getDefaultValue: function() {
            return {
                domainId: 0,
                instanceId: 0
            };
        }
    };
})();
