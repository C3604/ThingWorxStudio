var TW = TW || {};
TW.SDK = TW.SDK || {};
TW.SDK.Types = TW.SDK.Types || {};

(function () {
    TW.SDK.Types.LocationPrimitive = {
        decode: function(data) {
            TW.SDK.HelperFunctions.validateParameter(data, 'data', ArrayBuffer);

            var longitude = TW.SDK.Types.NumberPrimitive.decode(data.slice(0, 8));
            var latitude = TW.SDK.Types.NumberPrimitive.decode(data.slice(8, 16));
            var elevation = TW.SDK.Types.NumberPrimitive.decode(data.slice(16));

            return {
                length: 24,
                content: {
                    latitude: latitude.content,
                    longitude: longitude.content,
                    elevation: elevation.content
                }
            };
        },

        encode: function(content) {
            TW.SDK.HelperFunctions.validateParameter(content, 'content', 'object');

            var buffers = [];

            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.longitude));
            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.latitude));
            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.elevation));

            _.flatten(buffers);

            return TW.SDK.HelperFunctions.combineArrayBuffers(buffers);
        },

        getDefaultValue: function() {
            return {
                latitude: 0,
                longitude: 0,
                elevation: 0
            };
        }
    };
})();
