var TW = TW || {};
TW.SDK = TW.SDK || {};
TW.SDK.Types = TW.SDK.Types || {};

(function () {
    TW.SDK.Types.Vec4Primitive = {
        decode: function(data) {
            TW.SDK.HelperFunctions.validateParameter(data, 'data', ArrayBuffer);

            var x = TW.SDK.Types.NumberPrimitive.decode(data.slice(0, 8));
            var y = TW.SDK.Types.NumberPrimitive.decode(data.slice(8, 16));
            var z = TW.SDK.Types.NumberPrimitive.decode(data.slice(16, 24));
            var w = TW.SDK.Types.NumberPrimitive.decode(data.slice(24));

            return {
                length: 32,
                content: {
                    x: x.content,
                    y: y.content,
                    z: z.content,
                    w: w.content
                }
            };
        },

        encode: function(content) {
            TW.SDK.HelperFunctions.validateParameter(content, 'content', 'object');

            var buffers = [];

            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.x));
            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.y));
            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.z));
            buffers.push(TW.SDK.Types.NumberPrimitive.encode(content.w));

            _.flatten(buffers);

            return TW.SDK.HelperFunctions.combineArrayBuffers(buffers);
        },

        getDefaultValue: function() {
            return {
                x: 0,
                y: 0,
                z: 0,
                w: 1
            };
        }
    };
})();
