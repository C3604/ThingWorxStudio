/* begin copyright text
 *
 * Copyright Â© 2016 PTC Inc., Its Subsidiary Companies, and /or its Partners. All Rights Reserved.
 *
 * end copyright text
 */
function twxCheckbox() {
  var defaultText = 'Input Label';
  try {
    defaultText = i18next.t('ves-basic-web-widgets-extension:Input Label');
  }
  catch(e){
    //Running on the server
  }
  return {
    elementTag: 'twx-checkbox',

    label: 'ves-basic-web-widgets-extension:Checkbox',

    category: 'basic-html',

    properties: [
      {
          name: 'class',
          label: 'ves-basic-web-widgets-extension:Class',
          datatype: 'string',
          //default: '',
          isBindingTarget: true
      },
      {
        name: 'value',
        label: 'ves-basic-web-widgets-extension:Value',
        datatype: 'boolean',
        isBindingSource: true,
        isBindingTarget: true,
        default: false
      },
      {
        name: 'label',
        label: 'ves-basic-web-widgets-extension:Label',
        datatype: 'string',
        default: defaultText
      },
      {
        name: 'visible',
        label: 'ves-basic-web-widgets-extension:Visible',
        datatype: 'boolean',
        default: true,
        isBindingTarget: true
      },
      {
        name: 'disabled',
        label: 'ves-basic-web-widgets-extension:Disabled',
        datatype: 'boolean',
        default: false,
        isBindingTarget: true
      },
      {
        name: 'margin',
        label: 'ves-basic-web-widgets-extension:Margin',
        datatype: 'string',
        default: ''
      },
      {
        name: 'padding',
        label: 'ves-basic-web-widgets-extension:Padding',
        datatype: 'string',
        default: ''
      }
    ],

    events: [
      {
        name: 'change',
        label: 'ves-basic-web-widgets-extension:Value Changed'
      },
      {
        name: 'selected',
        label: 'ves-basic-web-widgets-extension:Selected'
      },
      {
        name: 'deselected',
        label: 'ves-basic-web-widgets-extension:Deselected'
      },
      {
        name: 'click',
        label: 'ves-basic-web-widgets-extension:Click'
      }
    ],

    designTemplate: function () {
      return '<div class="item item-checkbox {{me.class}}" style="padding:{{me.padding}}; margin:{{me.margin}};"><label class="checkbox"><input type="checkbox"></label>{{me.label}}</div>';
    },

    runtimeTemplate: function (props) {
      var tmpl = '<div \
        ng-show="app.fn.isTrue(me.visible)" \
        class="ng-hide item item-checkbox {{me.class}}" \
        ng-click="fireEvent(\'click\');" \
        style="padding:'+ props.padding +'; margin:'+ props.margin +';"> \
        <label class="checkbox">\
          <input type="checkbox" \
             ng-disabled="app.fn.isTrue(me.disabled)" '+ ((props.value === true) ? 'checked' : '') +' \
             ng-model="me.value" \
             ng-change="fireEvent(\'change\');fireEvent((app.fn.isTrue(me.value) ? \'selected\' : \'deselected\'))" ">\
        </label>{{me.label}}</div>';
      return tmpl;
    }
  }
}

twxAppBuilder.widget('twxCheckbox', twxCheckbox);