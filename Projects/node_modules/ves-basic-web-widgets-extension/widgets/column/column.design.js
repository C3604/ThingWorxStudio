/* begin copyright text
 *
 * Copyright Â© 2016 PTC Inc., Its Subsidiary Companies, and /or its Partners. All Rights Reserved.
 *
 * end copyright text
 */
(function (twxAppBuilder) {

  function twxCol() {
    return {
      elementTag: 'twx-col',

      label: 'ves-basic-web-widgets-extension:Column',

      category: 'basic-html',

      outputElementsOnly: true,

      isVisibleInPalette: false,

      isValidDropTarget: function (targetEl, sourceEl) {
        return targetEl && targetEl.tagName.toLowerCase() === 'twx-row';
      },

      isContainer: true,

      properties: [
        {
          name: 'class',
          label: 'ves-basic-web-widgets-extension:Class',
          datatype: 'string'
        },
        {
          name: 'flexdirection',
          label: 'ves-basic-web-widgets-extension:Flex Direction',
          datatype: 'string',
          default: 'column',
          editor: 'select',
          options: [
            {label: 'ves-basic-web-widgets-extension:Row', value: 'row'},
            {label: 'ves-basic-web-widgets-extension:Column', value: 'column'}
          ]
        },
        {
          name: 'justification',
          label: 'ves-basic-web-widgets-extension:Justification',
          datatype: 'string',
          default: 'flex-start',
          editor: 'select',
          options: [
            { label: 'ves-basic-web-widgets-extension:Start', value: 'flex-start' },
            { label: 'ves-basic-web-widgets-extension:End', value: 'flex-end' },
            { label: 'ves-basic-web-widgets-extension:Center', value: 'center' },
            { label: 'ves-basic-web-widgets-extension:Even Space Between', value: 'space-between' },
            { label: 'ves-basic-web-widgets-extension:Even Space Around', value: 'space-around' }
          ]
        },
        {
          name: 'alignment',
          label: 'ves-basic-web-widgets-extension:Alignment',
          datatype: 'string',
          default: 'stretch',
          editor: 'select',
          options: [
            { label: 'ves-basic-web-widgets-extension:Start', value: 'flex-start' },
            { label: 'ves-basic-web-widgets-extension:End', value: 'flex-end' },
            { label: 'ves-basic-web-widgets-extension:Center', value: 'center' },
            { label: 'ves-basic-web-widgets-extension:Stretch', value: 'stretch' },
            { label: 'ves-basic-web-widgets-extension:Baseline', value: 'baseline' }
          ]
        },
        {
          name: 'fixedcolsize',
          label: 'ves-basic-web-widgets-extension:Fixed Column Size',
          datatype: 'string',
          default: 'auto',
          updateDesignTimeOnChange: true
        },
        {
          name: 'wrap',
          label: 'ves-basic-web-widgets-extension:Content Wrap',
          datatype: 'string',
          default: 'wrap',
          editor: 'select',
          options: [
            { label: 'ves-basic-web-widgets-extension:Wrap', value: 'wrap' },
            { label: 'ves-basic-web-widgets-extension:No Wrap', value: 'no-wrap' }
          ]
        },
        {
            name: 'padding',
            label: 'ves-basic-web-widgets-extension:Padding 10px',
            datatype: 'string',
            default: '0px'
        }
      ],

      designTemplate: function () {
        return '<twx-container-content class="{{me.class}}" style="flex-direction:{{me.flexdirection}}; justify-content:{{me.justification}}; align-items: {{me.alignment}}; padding:{{me.padding}}; flex-wrap:{{me.wrap}}; flex: 0 0 {{me.fixedcolsize}};"></twx-container-content>';
      },

      runtimeTemplate: function (properties) {
        var tmpl = '<div class="col ' + properties.class + '" style="flex-direction:' + properties.flexdirection + ';' +
                        'justify-content: '+ properties.justification + ';' + 
                        'align-items: '+ properties.alignment + ';' + 
                        'padding: '+ properties.padding + ';' + 
                        'flex-wrap: '+ properties.wrap + ';' + 
                        (properties.fixedcolsize !== '' && properties.fixedcolsize !== undefined && properties.fixedcolsize !== 'auto' ? '-webkit-flex: 0 0 '+ properties.fixedcolsize +'; flex: 0 0 ' + properties.fixedcolsize : '') +'">' + 
                      '</div>';
        return tmpl;
      }
    }
  }

  twxAppBuilder.widget('twxCol', twxCol);

})(twxAppBuilder);