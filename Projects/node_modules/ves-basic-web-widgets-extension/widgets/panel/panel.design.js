/* begin copyright text
 *
 * Copyright Â© 2016 PTC Inc., Its Subsidiary Companies, and /or its Partners. All Rights Reserved.
 *
 * end copyright text
 */
(function(twxAppBuilder){

  function twxPanel(){
    return {
      elementTag: 'twx-panel',

      label: 'ves-basic-web-widgets-extension:Panel',

      category: 'basic-html',

      isContainer: true,

      

      isVisibleInPalette: true,

      properties: [
        { 
            name: 'class',
            label: 'ves-basic-web-widgets-extension:Class',
            datatype: 'string',
            //default: '',
            isBindingTarget: true
        },
        {
          name: 'width',
          label: 'ves-basic-web-widgets-extension:Width (px, %, vh, em)',
          datatype: 'string',
          default: ''
        },
        {
          name: 'height',
          label: 'ves-basic-web-widgets-extension:Height (px, %, vh, em)',
          datatype: 'string',
          default: ''
        },
        {
            name: 'padding',
            label: 'ves-basic-web-widgets-extension:Padding',
            datatype: 'string',
            default: '5px'
        },
        {
          name: 'flexdirection',
          label: 'ves-basic-web-widgets-extension:Flex Direction',
          datatype: 'string',
          default: 'column',
          editor: 'select',
          options: [
            {label: 'ves-basic-web-widgets-extension:Row', value: 'row'},
            {label: 'ves-basic-web-widgets-extension:Column', value: 'column'}
          ]
        },
        {
          name: 'justification',
          label: 'ves-basic-web-widgets-extension:Justification',
          datatype: 'string',
          default: 'flex-start',
          editor: 'select',
          options: [
            { label: 'ves-basic-web-widgets-extension:Start', value: 'flex-start' },
            { label: 'ves-basic-web-widgets-extension:End', value: 'flex-end' },
            { label: 'ves-basic-web-widgets-extension:Center', value: 'center' },
            { label: 'ves-basic-web-widgets-extension:Even Space Between', value: 'space-between' },
            { label: 'ves-basic-web-widgets-extension:Even Space Around', value: 'space-around' }
          ]
        },
        {
          name: 'alignment',
          label: 'ves-basic-web-widgets-extension:Alignment',
          datatype: 'string',
          default: 'stretch',
          editor: 'select',
          options: [
            { label: 'ves-basic-web-widgets-extension:Start', value: 'flex-start' },
            { label: 'ves-basic-web-widgets-extension:End', value: 'flex-end' },
            { label: 'ves-basic-web-widgets-extension:Center', value: 'center' },
            { label: 'ves-basic-web-widgets-extension:Stretch', value: 'stretch' },
            { label: 'ves-basic-web-widgets-extension:Baseline', value: 'baseline' }
          ]
        },
        {
          name: 'wrap',
          label: 'ves-basic-web-widgets-extension:Content Wrap',
          datatype: 'string',
          default: 'wrap',
          editor: 'select',
          options: [
            { label: 'ves-basic-web-widgets-extension:Wrap', value: 'wrap' },
            { label: 'ves-basic-web-widgets-extension:No Wrap', value: 'nowrap' }
          ]
        },
        {
          name: 'visible',
          label: 'ves-basic-web-widgets-extension:Visible',
          datatype: 'boolean',
          default: true,
          isBindingTarget: true
        }
      ],

      getFlexValue: function(me) {
        if (me.width === '') {
          return '1'
        } 
        return '0 0 ' + me.width;
      },

      designTemplate: function(props){
        return '<twx-container-content class="twx-panel {{me.class}}" style="padding: {{me.padding}}; flex-direction:{{me.flexdirection}}; justify-content:{{me.justification}}; align-items: {{me.alignment}}; padding:{{me.padding}}; flex-wrap:{{me.wrap}}; flex: {{ctrl.widgetDef.getFlexValue(me)}}; height: {{me.height}};"></twx-container-content>';
      },

      runtimeTemplate: function(props){
        var height = '';
        if (props.height) {
          height = 'height: ' + props.height + ';'
        }
        var width = '';
        if (props.width) {
          width = 'width: ' + props.width + ';'
        }
        var padding = '';
        if (props.padding) {
          padding = 'padding:' + props.padding + ';';
        }

        var tmpl = '<div ng-show="app.fn.isTrue(me.visible)" class="twx-panel {{me.class}}" style="'+ height + width + padding + '">' +
          '<twx-container-content ' + 
            'style="' + 
            'flex-direction:' + props.flexdirection + '; ' +
            'justify-content: '+ props.justification + '; ' +
            'align-items: '+ props.alignment + '; ' +
            'flex-wrap: '+ props.wrap + ';"> '  +
          '</twx-container-content></div>';
        return tmpl;
      }
    }
  }

  twxAppBuilder.widget('twxPanel', twxPanel);

})(twxAppBuilder);