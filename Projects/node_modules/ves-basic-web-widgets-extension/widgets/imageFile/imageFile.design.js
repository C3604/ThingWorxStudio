/* begin copyright text
 *
 * Copyright Â© 2016 PTC Inc., Its Subsidiary Companies, and /or its Partners. All Rights Reserved.
 *
 * end copyright text
 */
function twxImage2() {
  return {
    elementTag: 'twx-image2',

    label: 'ves-basic-web-widgets-extension:Resource Image',

    category: 'basic-html',

    properties: [
      {
        name: 'class',
        label: 'ves-basic-web-widgets-extension:Class',
        datatype: 'string',
        //default: '',
        isBindingTarget: true
      },
      {
        name: 'imgsrc',
        label: 'ves-basic-web-widgets-extension:Source',
        datatype: 'resource_url',
        resource_image: true,
        default: '',
        isBindingTarget: true
      },
      {
        name: 'backgroundcolor',
        label: 'ves-basic-web-widgets-extension:Background Color',
        datatype: 'string',
        isBindingTarget: true,
        default: 'transparent'
      },
      {
        name: 'width',
        label: 'ves-basic-web-widgets-extension:Width',
        datatype: 'string',
        default: ''
      },
      {
        name: 'height',
        label: 'ves-basic-web-widgets-extension:Height',
        datatype: 'string',
        default: ''
      },
      /*{
        name: 'alignment',
        label: 'ves-basic-web-widgets-extension:Alignment',
        datatype: 'string',
        default: 'left'
      },*/
      {
        name: 'imageAlign',
        label: 'ves-basic-web-widgets-extension:Alignment',
        datatype: 'string',
        default: 'flex-start',
        editor: 'select',
        options: [
          { label: 'ves-basic-web-widgets-extension:Left', value: 'flex-start' },
          { label: 'ves-basic-web-widgets-extension:Center', value: 'center' },
          { label: 'ves-basic-web-widgets-extension:Right', value: 'flex-end' }
        ]
      },
      {
        name: 'visible',
        label: 'ves-basic-web-widgets-extension:Visible',
        datatype: 'boolean',
        default: true,
        isBindingTarget: true
      },
      {
        name: 'padding',
        label: 'ves-basic-web-widgets-extension:Padding',
        datatype: 'string',
        default: ''
      }
    ],

    events: [
      {
        name: 'click',
        label: 'ves-basic-web-widgets-extension:Click'
      }
    ],

    designTemplate: function () {
      return '<div style="display: flex; justify-content: {{me.imageAlign}}; height: 40px;" class="img-placeholder" ng-if="me.imgsrc == \'\' || me.imgsrc.endsWith(\'/\')"></div>' +
        '<div style="display: flex; justify-content: {{me.imageAlign}};" ng-if="!me.imgsrc.endsWith(\'/\')">' +
        '<img class="me.class" ' +
        'ng-style="{\'background-color\': me.backgroundcolor, \'width\': me.width, \'height\': me.height,  \'padding\': me.padding}"'+
        'ng-src="{{me.imgsrc}}" /></div>';
    },

    runtimeTemplate: function (props) {
      var tmpl = '<div style="display: flex; justify-content: ' + props.imageAlign + ';"><img class="ng-hide {{me.class}}" ng-show="app.fn.isTrue(me.visible)" ' +
        'ng-style="{\'background-color\': me.backgroundcolor, \'width\': me.width, \'height\': me.height,  \'padding\': me.padding}" ' +
        'ng-src="{{me.imgsrc}}"' +
        'ng-click="fireEvent(\'click\');"/></div>';
      return tmpl;
    }
  }
}

twxAppBuilder.widget('twxImage2', twxImage2);