/* begin copyright text
 *
 * Copyright Â© 2016 PTC Inc., Its Subsidiary Companies, and /or its Partners. All Rights Reserved.
 *
 * end copyright text
 */
function twxTimeSeriesChart() {
  return {
    elementTag: 'twx-time-series-chart',

    label: 'ves-basic-web-widgets-extension:Time Series Chart',

    category: 'basic-html',

    properties: [
      {
          name: 'class',
          label: 'ves-basic-web-widgets-extension:Class',
          datatype: 'string',
          //default: '',
          isBindingTarget: true
      },
      {
        name: 'data',
        label: 'ves-basic-web-widgets-extension:Data',
        datatype: 'infotable',
        isBindingTarget: true
      },
      {
        name: 'autoUpdate',
        label: 'ves-basic-web-widgets-extension:Auto Update',
        datatype: 'boolean',
        default: true,
        isVisible: false
      },
      {
        name: 'labelsField',
        label: 'ves-basic-web-widgets-extension:X-axis Field',
        datatype: 'string',
        default: ''
      },
      {
        name: 'valuesField',
        label: 'ves-basic-web-widgets-extension:Y-axis Field',
        datatype: 'string',
        default: ''
      },
      {
        name: 'visible',
        label: 'ves-basic-web-widgets-extension:Visible',
        datatype: 'boolean',
        default: true,
        isBindingTarget: true
      },
      {
        name: 'margin',
        label: 'ves-basic-web-widgets-extension:Margin',
        datatype: 'string',
        default: ''
      }
    ],

    services: [
      {
        name: 'updateChart',
        label: 'ves-basic-web-widgets-extension:Update Chart'
      }
    ],

    events: [
      {
        name: 'click',
        label: 'ves-basic-web-widgets-extension:Click'
      }
    ],

    designTemplate: function () {
      return '<div class="{{me.class}} chart time-series-chart" style="padding: {{me.margin}};">Times Series Chart</div>';
    },

    runtimeTemplate: function (props) {
      var tmpl = 
        '<div class="chart-placeholder" ng-if="!me.data.length">' + 
          '<p class="chart-placeholder-text">Data is not loaded yet.</p>' +
        '</div>' +
        '<div ng-if="me.data.length" class="{{me.class}}" style="margin:'+ props.margin +';" ' +
        'cjs-chart ' +
        'auto-update="'+ props.autoUpdate +'" ' +
        'chart-type="timeseries" ' +
        'data="me.data" ' +
        'labels-field="{{me.labelsField}}" ' +
        'values-field="{{me.valuesField}}"' +
        'ng-click="fireEvent(\'click\');"></div>';
      return tmpl;
    }
  }
}

twxAppBuilder.widget('twxTimeSeriesChart', twxTimeSeriesChart);