// Any changes here impact the entire application (not just a component) and
// apply to all themes unless overridden.
@import "allvars";
@import "helpers";

html {
    font-size: 62.5%;
}

body {
    font:    #{$theme-font-size-root}/#{1.618} $theme-font-family;
    margin:  0;
    padding: 0;
}

html,
body,
.page-host {
    height: 100%;
}

.page-host {
    min-width: 128rem;
}

.h1 {
    color:         $theme-title-primary;
    font-size:     $theme-font-size-large;
    font-weight:   bold;
    padding-right: $theme-padding-thick;
}

///////////////////////////////
//
/// Tables
//
///////////////////////////////

.table {
    border:          $theme-border;
    border-collapse: initial;
    border-radius:   0;

    thead {
        background: $theme-table-header-bg;

        th {
            border:         0;
            @include text-contrast($theme-table-header-bg);
            padding:        $theme-padding-thin $theme-padding-thick;
            vertical-align: middle;
            white-space:    nowrap;

            &.col-checkbox {
                width: 2.5rem;
            }
        }
    }

    tbody {
        background-color: $theme-table-bg;

        tr {
            td {
                border-color: desaturate(lighten($theme-border-color, 67%), 6%);
                padding:      $theme-padding-med $theme-padding-thick;
            }

            &:hover {
                td {
                    background-color: $theme-table-row-hover;
                }
            }

            .truncate {
                white-space: nowrap;
            }
        }
    }
}

.table-secondary {
    border-color: desaturate(lighten($theme-border-color, 57%), $brand-secondary-saturation);

    thead {
        th {
            background-color: desaturate(lighten($theme-table-header-bg, 57%), $brand-secondary-saturation);
            @include text-contrast(desaturate(lighten($theme-table-header-bg, 57%), $brand-secondary-saturation));
        }
    }
}

///////////////////////////////
//
/// Form elements
//
///////////////////////////////

// Checkboxes and radio buttons
input[type="checkbox"],
input[type="radio"] {
    vertical-align: middle;
    width:          auto;
}

// Text input and textarea
.form-control {
    background-color: $theme-input-bg;
    border:           $theme-minor-border;
    border-radius:    0;
    color:            $theme-input-color;
    display:          inline-block;
    font-size:        $theme-font-size-root;

    &:hover {
        border-color: lighten($theme-minor-border-color, 10%);
    }

    &:focus {
        border-color: darken($theme-minor-border-color, 25%);
    }

    &:disabled,
    &.disabled {
        background-color: $theme-disabled-bg;
        border-color:     $theme-disabled-bg;
        color:            $theme-disabled-color;
    }

    &.form-control--error:focus,
    &.form-control--error {
        border-color: $theme-required-color;
    }
}

///////////////////////////////
//
/// Layout assets
//
///////////////////////////////

// Left nav panel
$layout-left-nav-width: 25rem;

///////////////////////////////
//
/// Dropdown menu
//
///////////////////////////////

.dropdown-menu {
    border:        $theme-border;
    border-radius: 0;

    a {
        color:           $theme-link;
        display:         block;
        font-size:       $theme-font-size-root;
        padding:         $theme-padding-thin $theme-padding-med;
        text-decoration: none;

        &:focus,
        &:hover {
            background-color: $theme-dropdown-bg-hover;
            color:            $theme-link-hover;
        }
    }

    $_select_border_thickness: 0.7rem;

    &::before {
        border-bottom: $_select_border_thickness solid $theme-border-color;
        border-left:   $_select_border_thickness solid transparent;
        border-right:  $_select_border_thickness solid transparent;
        content:       "";
        display:       inline-block;
        left:          ($_select_border_thickness + 0.2rem);
        position:      absolute;
        top:           -$_select_border_thickness;
    }

    &::after {
        border-bottom: ($_select_border_thickness - 0.1rem) solid $theme-base-bg;
        border-left:   ($_select_border_thickness - 0.1rem) solid transparent;
        border-right:  ($_select_border_thickness - 0.1rem) solid transparent;
        content:       "";
        display:       inline-block;
        left:          1rem;
        position:      absolute;
        top:           -($_select_border_thickness - 0.1rem);
    }
}

///////////////////////////////
//
/// Tooltip
//
///////////////////////////////

.tooltip {

    .tooltip-inner {
        background:  $theme-base-bg;
        border-left: $theme-border;
        box-shadow:  0.1rem 0.1rem 0.1rem $theme-border-color;
        color:       $theme-dark-text;
        font-size:   $theme-font-size-small;
        max-width:   45rem;
        padding:     $theme-padding-med;
        text-align:  left;
        word-wrap:   break-word;
    }

    &.in {
        opacity: 1;
    }
}

.tooltip-arrow {
    border-bottom-color: transparent !important; // !important to overwrite BS specificity
}

.bs-tether-element-attached-top {
    .tooltip-arrow {
        border-bottom-color: transparent;
        top:                 0.1rem; // overlay on top of tooltip
        transform:           scale(2.5); // bigger to accentuate the connector
    }
}

.tooltip.tooltip-right,
.tooltip.bs-tether-element-attached-left {
    .tooltip-arrow {
        border-right-color:  $theme-base-bg;
        border-bottom-color: transparent !important; // need to override bootstrap important
        transform:           scale(2.5); // bigger to match classic style
    }
}

.bs-tether-element-attached-left {
    .tooltip-arrow {
        left: 0.1rem; // overlay on top of tooltip
    }
}

///////////////////////////////
//
/// Tabs menu
//
///////////////////////////////

.nav-tabs {
    border-bottom: $theme-navtabs-border;

    .nav-item {
        display: inline;

        .nav-link {
            background-color: desaturate(lighten($theme-navtabs-bg, 57%), $brand-secondary-saturation);
            border:           0;
            border-bottom:    $theme-navtabs-border;
            border-radius:    0;
            @include text-contrast(desaturate(lighten($theme-navtabs-bg, 57%), $brand-secondary-saturation));
            cursor:           pointer;
            display:          block;
            font-weight:      normal;
            padding:          $theme-padding-med $theme-padding-thick;

            &:focus,
            &:hover {
                background-color: desaturate(lighten($theme-navtabs-bg, 62%), $brand-secondary-saturation);
            }

            &.active,
            &.active:focus,
            &.active:hover {
                background-color: $theme-navtabs-bg;
                @include text-contrast($theme-navtabs-bg);
                cursor:           default;
            }
        }
    }
}

///////////////////////////////
//
/// Buttons
//
///////////////////////////////

.btn {
    border-radius: 0;
    font-size:     $theme-font-size-med;
    font-weight:   normal;
    padding:       $theme-padding-thin $theme-padding-med;
    text-align:    center;

    &:focus {
        outline: thin dotted $twx-white;
    }
}

// Primary button mixin
@mixin btn-primary() {
    background: $theme-button-bg;
    border:     $theme-button-border;
    color:      $theme-button-color;

    &:active,
    &:active:focus,
    &:active:hover,
    &:focus,
    &:hover {
        background:   lighten($theme-button-bg, 15%);
        border-color: lighten($theme-border-color, 15%);
    }
}

// Primary button class selector
.btn-primary {
    @include btn-primary();
}

.btn-secondary {
    background: $theme-button-secondary-bg;
    border:     $theme-secondary-button-border;
    color:      $theme-secondary-button-color;

    &:active,
    &:active:focus,
    &:active:hover,
    &:focus,
    &:hover {
        border:     $theme-secondary-button-border;
        background: lighten($theme-button-secondary-bg, 15%);
        color:      $theme-secondary-button-color;
    }
}

.btn-oval-left,
.btn-oval-right {
    border:        0;
    padding-left:  $theme-padding-med;
    padding-right: $theme-padding-med;
}

.btn-oval-left {
    border-radius: 1.2rem 0 0 1.2rem / 1.2rem 0 0 1.2rem;
}

.btn-oval-right {
    border-radius: 0 1.2rem 1.2rem 0 / 0 1.2rem 1.2rem;
}

.btn-mini {
    background-color: $theme-button-mini-bg;
    border-radius:    0;
    box-shadow:       none;
    color:            $theme-dark-text;
    font-size:        $theme-font-size-small;
    padding:          $theme-padding-thin / 2;
    vertical-align:   middle;

    &:focus,
    &:hover {
        background-color: darken($theme-button-mini-bg, 5%);
        color:            $theme-dark-text;
    }
}

.btn-primary.selected {
    background-color: $theme-button-selected-bg;
}

.btn-link {
    color:           lighten($theme-button-link-color, 10%);
    font-size:       $theme-font-size-root;
    text-decoration: underline;

    &:focus,
    &:hover {
        color: $theme-button-link-color-hover;
    }
}

.btn-execute {
    background: transparent;
    border:     0;
    color:      $theme-dark-text;
    margin:     0;
    padding:    0;
}

.btn-action {
    background: $theme-button-action-bg;
    border:     $theme-button-action-border;
    color:      $theme-button-action-color;

    &:active,
    &:active:focus,
    &:active:hover,
    &:focus,
    &:hover {
        border:     $theme-button-action-border;
        background: lighten($theme-button-action-bg, 15%);
        color:      $theme-button-action-color;
    }
}

// Success button mixin
@mixin btn-success() {
    background: $theme-button-success-bg;
    border:     $theme-button-success-border;
    color:      $theme-button-success-color;

    &:active,
    &:active:focus,
    &:active:hover,
    &:focus,
    &:hover {
        border:     $theme-button-success-border;
        background: lighten($theme-button-success-bg, 15%);
        color:      $theme-button-success-color;
    }
}

.btn-success {
    @include btn-success();
}

// Disabled button mixin
@mixin btn-disabled() {
    background: $theme-disabled-bg;
    border:     $theme-disabled-border;
    color:      $theme-disabled-color;
    cursor:     not-allowed;
    opacity:    1;
}

// Disabled button class selector
button[class*="btn-"]:disabled,
button[class*="btn-"]:disabled:focus,
button[class*="btn-"]:disabled:hover {
    @include btn-disabled();
}

button[class*="btn-secondary"]:disabled,
button[class*="btn-secondary"]:disabled:focus,
button[class*="btn-secondary"]:disabled:hover {
    background: transparent;
    border:     $theme-disabled-border;
    color:      $theme-light-text;
    opacity:    0.5;
}

///////////////////////////////
//
/// Dialog box
//
///////////////////////////////

ai-dialog {
    display: table !important;
}

ai-dialog-overlay.active {
    background-color: $theme-overlay-bg !important;
    opacity:          0.5 !important;
}

// Override the bootstrap definition which uses the highlight color for background
.list-group-item.active,
.list-group-item.active:focus,
.list-group-item.active:hover {
    background-color: transparent;
    border-color: transparent;
}

.grid-commands {
    .form-group {
        display: inline-block;

        .btn-toolbar {
            display: inline-block;
        }
    }
}

// Bootstrap tooltip popups
.popover {
    &.popover-right, &.bs-tether-element-attached-left
    {
        .popover-arrow {
            &::after {
                left: .15rem;
            }
        }

    }
}
